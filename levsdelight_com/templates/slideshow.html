{% extends 'base.html' %}

{% block css_includes %}
    <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/slideshow.css" />
{% endblock %}

{% block content %}

<div id="controls"></div>
<div id="loading"></div>
<div id="slideshow"></div>
<div id="caption"></div>

<div id="thumbs">
    <ul class="thumbs">

        {% for s in allSlides %}
        <li>
            <a class="thumb" href="{{STATIC_URL}}img/{{s.pictureLocation}}" width="100" height="100" title="{{s.title}}">
                <img class="slide" src="{{STATIC_URL}}img/{{s.pictureLocation}}" alt="{{s.title}}" />
            </a>
            <div class="caption">{{ s.desc }}</div>
        </li>
        {% endfor %}

    </ul>
</div> <!-- END thumbs -->


{% endblock %}

{% block javascript_includes %}
<script type="text/javascript">

var renderPictureChooser = function(slideArray) {

    var pcTemplate = '<div class="pictureChooser"><ul>';

    for(var i = 0; i < slideArray.length; i++) {
        pcTemplate += '<li class="pcThumb"><img src="' +
            slideArray[i].href + '" alt="' +
            slideArray[i].title + '" /></li>';
    
    }

    pcTemplate += '</ul></div>';

    $('ul.thumbs').remove();
    $('div#thumbs').append(pcTemplate);

}
    var buildSlides = function() {

        var image, aEl, caption, href, title, desc;
        var slides = [];
        var slideObj = {};
        var images = $('#thumbs').find('li');

        for (var i = 0; i < images.length; i++ ) {
            image = $(images[i]);
            aEl = $(image.children()[0]);
            caption = $(image.children()[1]);
            href = aEl.attr('href');
            title = aEl.attr('title');
            desc = caption.text();
            
            slideObj = {
                title: title,
                href: href,
                desc: desc,
            };
            slides.push(slideObj);
            slideObj = {};
        }

        console.log("The slides");
        console.log(slides);

        return slides;

    }


    var theSlides = buildSlides();

    renderPictureChooser(theSlides);



</script>


{% endblock %}
